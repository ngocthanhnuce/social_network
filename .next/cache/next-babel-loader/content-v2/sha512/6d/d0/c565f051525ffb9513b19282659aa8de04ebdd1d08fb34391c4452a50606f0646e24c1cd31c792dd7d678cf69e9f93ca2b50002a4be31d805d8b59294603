{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Admin/Documents/social/social_network/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/Admin/Documents/social/social_network/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:/Users/Admin/Documents/social/social_network/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/Admin/Documents/social/social_network/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport baseUrl from \"./baseUrl\";\nimport catchErrors from \"./catchErrors\";\nimport cookie from \"js-cookie\";\nimport Router from \"next/router\";\nvar Axios = axios.create({\n  baseURL: \"\".concat(baseUrl, \"/api/profile\"),\n  headers: {\n    Authorization: cookie.get(\"token\")\n  }\n});\nexport var followUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userToFollowId, setUserFollowStats) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return Axios.post(\"/follow/\".concat(userToFollowId));\n\n          case 3:\n            setUserFollowStats(function (prev) {\n              return _objectSpread(_objectSpread({}, prev), {}, {\n                following: [].concat(_toConsumableArray(prev.following), [{\n                  user: userToFollowId\n                }])\n              });\n            });\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            alert(catchErrors(_context.t0));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 6]]);\n  }));\n\n  return function followUser(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var unfollowUser = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userToUnfollowId, setUserFollowStats) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Axios.put(\"/unfollow/\".concat(userToUnfollowId));\n\n          case 3:\n            setUserFollowStats(function (prev) {\n              return _objectSpread(_objectSpread({}, prev), {}, {\n                following: prev.following.filter(function (following) {\n                  return following.user !== userToUnfollowId;\n                })\n              });\n            });\n            _context2.next = 9;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert(catchErrors(_context2.t0));\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 6]]);\n  }));\n\n  return function unfollowUser(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var profileUpdate = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(profile, setLoading, setError, profilePicUrl) {\n    var bio, work, relationship, address, education, birthday, facebook, youtube, twitter, instagram;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            bio = profile.bio, work = profile.work, relationship = profile.relationship, address = profile.address, education = profile.education, birthday = profile.birthday, facebook = profile.facebook, youtube = profile.youtube, twitter = profile.twitter, instagram = profile.instagram;\n            _context3.next = 4;\n            return Axios.post(\"/update\", {\n              bio: bio,\n              work: work,\n              relationship: relationship,\n              address: address,\n              education: education,\n              birthday: birthday,\n              facebook: facebook,\n              youtube: youtube,\n              twitter: twitter,\n              instagram: instagram,\n              profilePicUrl: profilePicUrl\n            });\n\n          case 4:\n            setLoading(false);\n            Router.reload();\n            _context3.next = 12;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](0);\n            setError(catchErrors(_context3.t0));\n            setLoading(false);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 8]]);\n  }));\n\n  return function profileUpdate(_x5, _x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var updateAvatar = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(setLoading, setError, profilePicUrl) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return Axios.put(\"/updatepic\", {\n              profilePicUrl: profilePicUrl\n            });\n\n          case 3:\n            setLoading(false);\n            Router.reload();\n            _context4.next = 11;\n            break;\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            setError(catchErrors(_context4.t0));\n            setLoading(false);\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n\n  return function updateAvatar(_x9, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var passwordUpdate = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(setSuccess, userPasswords) {\n    var currentPassword, newPassword;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            currentPassword = userPasswords.currentPassword, newPassword = userPasswords.newPassword;\n            _context5.prev = 1;\n            _context5.next = 4;\n            return Axios.post(\"/settings/password\", {\n              currentPassword: currentPassword,\n              newPassword: newPassword\n            });\n\n          case 4:\n            setSuccess(true);\n            _context5.next = 10;\n            break;\n\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5[\"catch\"](1);\n            alert(catchErrors(_context5.t0));\n\n          case 10:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[1, 7]]);\n  }));\n\n  return function passwordUpdate(_x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var toggleMessagePopup = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(popupSetting, setPopupSetting, setSuccess) {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            _context6.next = 3;\n            return Axios.post(\"/settings/messagePopup\");\n\n          case 3:\n            setPopupSetting(!popupSetting);\n            setSuccess(true);\n            _context6.next = 10;\n            break;\n\n          case 7:\n            _context6.prev = 7;\n            _context6.t0 = _context6[\"catch\"](0);\n            alert(catchErrors(_context6.t0));\n\n          case 10:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[0, 7]]);\n  }));\n\n  return function toggleMessagePopup(_x14, _x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["C:/Users/Admin/Documents/social/social_network/utils/profileActions.js"],"names":["axios","baseUrl","catchErrors","cookie","Router","Axios","create","baseURL","headers","Authorization","get","followUser","userToFollowId","setUserFollowStats","post","prev","following","user","alert","unfollowUser","userToUnfollowId","put","filter","profileUpdate","profile","setLoading","setError","profilePicUrl","bio","work","relationship","address","education","birthday","facebook","youtube","twitter","instagram","reload","updateAvatar","passwordUpdate","setSuccess","userPasswords","currentPassword","newPassword","toggleMessagePopup","popupSetting","setPopupSetting"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport baseUrl from \"./baseUrl\";\nimport catchErrors from \"./catchErrors\";\nimport cookie from \"js-cookie\";\nimport Router from \"next/router\";\n\nconst Axios = axios.create({\n  baseURL: `${baseUrl}/api/profile`,\n  headers: { Authorization: cookie.get(\"token\") },\n});\n\nexport const followUser = async (userToFollowId, setUserFollowStats) => {\n  try {\n    await Axios.post(`/follow/${userToFollowId}`);\n\n    setUserFollowStats((prev) => ({\n      ...prev,\n      following: [...prev.following, { user: userToFollowId }],\n    }));\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\n\nexport const unfollowUser = async (userToUnfollowId, setUserFollowStats) => {\n  try {\n    await Axios.put(`/unfollow/${userToUnfollowId}`);\n\n    setUserFollowStats((prev) => ({\n      ...prev,\n      following: prev.following.filter(\n        (following) => following.user !== userToUnfollowId\n      ),\n    }));\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\n\nexport const profileUpdate = async (\n  profile,\n  setLoading,\n  setError,\n  profilePicUrl\n) => {\n  try {\n    const {\n      bio,\n      work,\n      relationship,\n      address,\n      education,\n      birthday,\n      facebook,\n      youtube,\n      twitter,\n      instagram,\n    } = profile;\n\n    await Axios.post(`/update`, {\n      bio,\n      work,\n      relationship,\n      address,\n      education,\n      birthday,\n      facebook,\n      youtube,\n      twitter,\n      instagram,\n      profilePicUrl,\n    });\n\n    setLoading(false);\n    Router.reload();\n  } catch (error) {\n    setError(catchErrors(error));\n    setLoading(false);\n  }\n};\n\nexport const updateAvatar = async (setLoading, setError, profilePicUrl) => {\n  try {\n    await Axios.put(`/updatepic`, {\n      profilePicUrl,\n    });\n    setLoading(false);\n    Router.reload();\n  } catch (error) {\n    setError(catchErrors(error));\n    setLoading(false);\n  }\n};\n\nexport const passwordUpdate = async (setSuccess, userPasswords) => {\n  const { currentPassword, newPassword } = userPasswords;\n  try {\n    await Axios.post(`/settings/password`, { currentPassword, newPassword });\n\n    setSuccess(true);\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\n\nexport const toggleMessagePopup = async (\n  popupSetting,\n  setPopupSetting,\n  setSuccess\n) => {\n  try {\n    await Axios.post(`/settings/messagePopup`);\n\n    setPopupSetting(!popupSetting);\n    setSuccess(true);\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\n"]},"metadata":{},"sourceType":"module"}